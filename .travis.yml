sudo: required

services:
  - docker

before_install:
  - docker login --username=$DOCKER_USER --password=$DOCKER_PASS
  
install:
  - npm run build

script:
  - npm run build-docker

after_success:
  - 'if [ "$TRAVIS_PULL_REQUEST" = "false" ] && [ "$TRAVIS_BRANCH" = "dev" ]; then npm run publish-docker; fi'